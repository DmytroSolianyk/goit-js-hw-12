{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '48841275-5fdf514aecbb5a7f0d9901bba';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport function searchImages(query, page = 1, per_page = 10) {\n  return axios\n    .get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        safesearch: true,\n        orientation: 'horizontal',\n        page: page,\n        per_page: per_page,\n      },\n    })\n    .then(response => {\n      return response.data;\n    })\n    .catch(error => {\n      console.error('Помилка при виконанні запиту:', error);\n      throw error;\n    });\n}\n","export function createGalleryMarkup(images) {\n  return images\n    .map(\n      ({\n        webformatURL,\n        tags,\n        largeImageURL,\n        views,\n        downloads,\n        likes,\n        comments,\n      }) => {\n        return `\n        <li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n          </a>\n          <div class=\"gallery-item-description\">\n            <label>\n              Likes\n              <span>${likes}</span>\n            </label>\n    \n            <label>\n              Views\n              <span>${views}</span>\n            </label>\n    \n            <label>\n              Comments\n              <span>${comments}</span>\n            </label>\n    \n            <label>\n              Downloads\n              <span>${downloads}</span>\n            </label>\n          </div>\n        </li>\n      `;\n      }\n    )\n    .join('');\n}\n","// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { searchImages } from './js/pixabay-api';\nimport { createGalleryMarkup } from './js/render-functions';\n\nlet page = 1;\nlet per_page = 40;\nlet currentQuery = '';\n\ndocument.addEventListener('DOMContentLoaded', initializeEventListeners);\n\nfunction initializeEventListeners() {\n  document\n    .getElementById('search-form')\n    .addEventListener('submit', onSearchFormSubmit);\n  document.getElementById('load-more').addEventListener('click', async () => {\n    setIsLoadMore(false);\n    page++;\n    await fetchImages(currentQuery);\n    smoothScroll();\n  });\n}\n\nasync function onSearchFormSubmit(event) {\n  event.preventDefault();\n  const gallery = document.getElementById('gallery');\n  gallery.innerHTML = '';\n  setIsLoadMore(false);\n  page = 1;\n\n  currentQuery = getQuery();\n  if (currentQuery === '') {\n    displayEmptyQueryError();\n    return;\n  }\n\n  await fetchImages(currentQuery);\n}\n\nasync function fetchImages(query) {\n  const gallery = document.getElementById('gallery');\n  setGalleryLoading(true);\n  try {\n    const data = await searchImages(query.trim(), page, per_page);\n    updateGallery(gallery, data.hits);\n    if (data.totalHits > page * per_page) {\n      setIsLoadMore(true);\n    } else if (data.hits.length > 0) {\n      displayReachedEndError();\n    }\n  } catch (error) {\n    handleError(error);\n    setGalleryLoading(false);\n  }\n}\n\nfunction getQuery() {\n  return document.getElementById('search-input').value;\n}\n\nfunction setGalleryLoading(val) {\n  if (val) {\n    document.getElementById('loading').classList.remove('hidden');\n  } else {\n    document.getElementById('loading').classList.add('hidden');\n  }\n}\n\nfunction setIsLoadMore(val) {\n  if (val) {\n    document.getElementById('load-more').classList.remove('hidden');\n  } else {\n    document.getElementById('load-more').classList.add('hidden');\n  }\n}\n\nfunction updateGallery(gallery, images) {\n  if (images.length > 0) {\n    const galleryMarkup = createGalleryMarkup(images);\n    gallery.innerHTML += galleryMarkup;\n\n    const lightbox = new SimpleLightbox('.gallery a');\n    lightbox.refresh();\n\n    setGalleryLoading(false);\n  } else {\n    displayNoImagesError();\n    clearQuery();\n    setGalleryLoading(false);\n  }\n}\n\nfunction displayNoImagesError() {\n  iziToast.error({\n    message: `Sorry, there are no images matching your search query. Please try again!`,\n    position: 'topRight',\n  });\n}\n\nfunction displayReachedEndError() {\n  iziToast.info({\n    message: `We're sorry, but you've reached the end of search results.`,\n    position: 'topRight',\n  });\n}\n\nfunction displayEmptyQueryError() {\n  iziToast.error({\n    message: `Sorry, search input cannot be empty!`,\n    position: 'topRight',\n  });\n}\n\nfunction handleError(error) {\n  iziToast.error({\n    message: error.code,\n    position: 'topRight',\n  });\n}\n\nfunction clearQuery() {\n  document.getElementById('search-input').value = '';\n}\n\nfunction smoothScroll() {\n  const galleryItems = document.querySelectorAll('.gallery-item');\n  if (galleryItems.length > 0) {\n    const cardHeight = galleryItems[0].getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  }\n}\n"],"names":["API_KEY","BASE_URL","searchImages","query","page","per_page","axios","response","error","createGalleryMarkup","images","webformatURL","tags","largeImageURL","views","downloads","likes","comments","currentQuery","initializeEventListeners","onSearchFormSubmit","setIsLoadMore","fetchImages","smoothScroll","event","gallery","getQuery","displayEmptyQueryError","setGalleryLoading","data","updateGallery","displayReachedEndError","handleError","val","galleryMarkup","SimpleLightbox","displayNoImagesError","clearQuery","iziToast","galleryItems","cardHeight"],"mappings":"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"}